# 版本记录

- 0.9.10 – 优化托盘菜单状态同步机制：内核启动成功后立即刷新菜单，解决代理组、TUN 等功能在启动初期呈灰色不可用的问题。

- 0.9.9 – 修复右键托盘菜单闪退问题；使用原生 Windows API (`ShellExecute`) 替代 PowerShell 实现管理员重启，提升安全性与稳定性。

- 0.9.8 – 托盘菜单全面重构：采用功能分组设计，新增分隔线提升视觉清晰度；添加“关于”子菜单展示版本信息；在配置切换中集成“自动更新当前订阅”开关；修复 TUN 模式菜单在配置未启用时灰化的问题。

- 0.9.7 – 简化内核启动检测逻辑：移除显式 TCP 端口探测，完全依赖 API 客户端重试（支持最长 15s 等待），并在等待期间实时监控内核进程存活，避免因检测方式不一致或进程中途退出导致的启动误判。

- 0.9.6 – 引入智能启动重试机制：当内核启动失败（如端口被抢占或进程异常）时，自动轮换端口并重试启动（最多3次），彻底解决“端口占用”导致的启动死锁。

- 0.9.5 – 优化内核启动流程：增加对端口开放的显式等待，避免因内核启动慢导致的“控制接口未就绪”误报；增加内核进程即时存活检查，在启动失败时提供更明确的错误信息。

- 0.9.4 – 修复订阅调度器（SubscriptionScheduler）在非 Tokio 上下文中启动导致的 Critical Panic 问题。

- 0.9.3 – 新增全局 Panic 钩子，确保崩溃时弹出错误对话框而非静默退出；修复托盘菜单构建中的异步线程安全问题，提升运行稳定性。

- 0.9.2 – 托盘菜单构建增加 ID/名称容错与精简兜底，避免异常配置或节点名导致托盘初始化失败。

- 0.9.1 – 补强订阅更新之防重入/重试/批量单次重载与密钥链存储，增加系统通知与托盘手动更新入口。

- 0.8.3 – 完成 Rust 防 panic 编码规范审计，修复所有高优先级问题（`.parent().unwrap()`、直接索引访问等），业务逻辑代码不再包含裸 unwrap 调用。
- 0.8.2 – 修复编辑器路径选择对话框构建导致打包失败。
- 0.8.1 – 修复外部编辑器通过 code/cmd 启动失败，新增编辑器路径选择入口，自动探测失败回退记事本。
- 0.8.0 – 外部编辑器自动探测 VSCode 并回退记事本，支持带参数命令解析，配置管理 UI 模块化拆分，新增清空配置与托盘恢复出厂设置。
- 0.7.3 – 撤销 MSI 安装界面定制，配置切换等待增加超时与重试，避免管理页卡死。
- 0.7.2 – 配置切换/导入/保存增加锁定与重启等待反馈。
- 0.7.1 – MSI 安装定制（已撤销）。
- 0.7.0 – 订阅导入改为后台重启提升响应速度，Windows 启动不再闪 cmd 窗口，配置管理界面升级为 Vue 3 + TS + Tailwind。
- 0.6.7 – 订阅导入增加解码失败兜底（禁用自动解压后手动解码 gzip/deflate/brotli），并在导入失败时自动刷新配置列表，补充应用日志路径说明。
- 0.6.6 – 订阅导入改用字节流解码并开启压缩解码能力，避免“error decoding response body”，管理接口补全请求/响应链路日志。
- 0.6.5 – GeoIP 支持从内核同目录复制并新增镜像源兜底下载，重启前等待控制端口与代理端口释放并明确占用错误。
- 0.6.4 – GeoIP 预下载强制使用 identity 编码并校验文件大小，避免响应体解码失败导致启动中断。
- 0.6.3 – 启动前预下载 GeoIP 数据库以避免 GEOIP 规则导致启动失败，配置切换后无论成功与否刷新列表状态。
- 0.6.2 – 启动时等待控制端口就绪再上报，mihomo 输出重定向到日志文件便于排查配置问题。
- 0.6.1 – 运行时设置改为 TOML 并自动迁移旧 JSON，配置切换/保存时重启等待控制端口释放，避免 Web UI 控制端口漂移。
- 0.6.0 – 托盘/运行时/前端/设置逻辑模块化拆分，核心能力下沉到 `despicable-infiltrator-core`，移除平台 `unsafe` 调用并改用安全库封装，YAML 解析切换为纯 Rust 实现。
- 0.5.11 – 兼容默认内核文件名 `mihomo.exe` 与 `mihomo-windows-amd64-v3.exe`，补充使用规范文档并打包进安装包。
- 0.5.10 – 修复安装目录 `bin/mihomo` 下捆绑内核的查找路径，确保首次启动直接使用默认内核。
- 0.5.9 – 首次启动强制使用捆绑内核且不联网下载，下载失败时回退捆绑内核，改进资源路径解析并记录日志。
- 0.5.8 – 切换内核后托盘状态自动刷新，避免停留在“启动中/初始化中”。
- 0.5.7 – 外部编辑器报错更明确，删除配置/内核强提示确认。
- 0.5.6 – 托盘内核管理支持默认内核与版本启用/删除，配置列表加入滚动。
- 0.5.5 – 新增本地导入与外部编辑器设置，内核更新显示进度/网络状态，支持计划任务自启。
